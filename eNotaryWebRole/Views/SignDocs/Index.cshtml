@model eNotaryWebRole.Models.UnsignedDocumentsViewModel


<h2>Index</h2>

<div id="ErrorMessageSignDocs"></div>

@using (@Ajax.BeginForm("Index", "SignDocs", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "Test", InsertionMode = InsertionMode.Replace, LoadingElementId = "loadingDiv", OnBegin = "onBegin", OnSuccess = "onSuccess" }, new { id = "formSignDocs" })){
<div id ="signDocsContent" >   
        <div id="tree-container" >
            
                    <div id="tree-toggle">
                        <i class="icon-chevron-left"></i>
                    </div>     
   
                        <div id="jstree">
                             <p id="chooseVariables"  style="margin-bottom: 10px; margin-top:20px;">
                                <b> Documente </b>
                            </p>                  

                            @Html.Action("Index", "Tree")

                            <div class="clear-all"></div>
                        </div>                        
            
                     
                        <div class="clear-all"></div>
                    </div>


        <div id="accordion-and-doc">
        <div class="accordion-group" id="doc-controls-accordion">
                        <div class="accordion-heading">
                            <a class="accordion-toggle" data-toggle="collapse" href="#collapse-doc-controls-top">
                                <b>
                                    Detalii despre document si persoana 
                                </b>
                                <i class="icon-chevron-up"></i>
                            </a>
                        </div>
            
                        <div id="collapse-doc-controls-top" class="accordion-body collapse in">
                            <div class="accordion-inner">
                                <div id="doc-controls-top"> 
                                    <div id="personDetail-shadow "></div>
                                    <div id="sgpersonDetail" class="disabled">
                                        <input type="text" id="sdPersonFirstName" class="inputSignDocs" placeholder="Prenume 1" />
                                        <input type="text" id="sdPersonMiddleName" class="inputSignDocs" placeholder ="Prenume 2" />
                                        <input type="text" id="sdPersonLastName" class="inputSignDocs" placeholder="Nume" />
                                   
                                        <input type="text" id="sdGender" class="inputSignDocs" placeholder="Sex " />
                                        <input type="text" id="sdAge" class="inputSignDocs" placeholder="Varsta" />
                                        <input type="text" id="sdBirthday" class="inputSignDocs" placeholder="Data Nasterii" />
                                        
                                        
                                    </div>
                                    <button id="btnViewFullProfile"  class="btn "><i class=" icon-play"></i></button>

                                    <div id="sgActDetail">
                                        @Html.DropDownList("ActTypeList","Tipul actului")
                                        <input type="text" id="sdActName" class="inputSignDocs" placeholder ="Nume Act" />
                                        <input type="text" id="sdCreationDate" class="inputSignDocs" placeholder="Data crearii" disabled/>
                                        <input type="text" id="sdReason" class="inputSignDocs" placeholder="Necesar la .." />
                                        <input type="text" id="sdState" class="inputSignDocs" placeholder ="Stare document" />
                                        <input type="text" id ="sdReasonState" class="inputSignDocs" placeholder ="Motiv stare" />
                                        <div style="float:left;margin-bottom:20px;">
                                        <input type="checkbox" id="sdSentToClient" style="float:left;" /> <label id ="sgSentToClientText" style="float:left;padding-left:10px;" >A fost anuntat clientul</label>
                                        </div>

                                    </div>
                                    
                                    
                                

                                    <div class="clear-all"></div>
                                </div>
                            </div>
                        </div>
                    </div>
        </div>
    <div id="buttonControls" style="float:right;margin-right:20px; margin-bottom:20px;">
        <button id="sgSignDocument" class="btn">Semneaza</button>
        <button id="sgSalveaza" class="btn">Salveaza</button>
    </div>
        <div id="documentListed" class=".is-doc-container"style="float:right; margin-top:20px;">
            <iframe src="" frameborder="0" id="iframeDoc" style="width:100%; height:700px;"></iframe>
         </div>
</div>
}
<script>

    var onBegin = function (data) {
        return true;
    };
    var onSuccess = function (data) {
       
        count = data[0];

        if (count != null) {


            if (data == "Datele nu au fost salvate!") {
                $("#ErrorMessageSignDocs").removeClass('alert alert-success');
                $("#ErrorMessageSignDocs").addClass('alert alert-error');

            } else {

                $("#ErrorMessageSignDocs").removeClass('alert alert-error');
                $("#ErrorMessageSignDocs").addClass('alert alert-success');
            }

            $("#ErrorMessageSignDocs").html(data);

        } else {

            $("#ErrorMessageSignDocs").html("Datele nu au fost salvate!");


            $("#ErrorMessageSignDocs").addClass('alert alert-error');

            $("#ErrorMessageSignDocs").html(data);
        }
    };

    $(function () {

        $("#ActTypeList").addClass('inputSignDocs');
        $("#ActTypeList").width($("#sdGender").width()+14);
        // view full profile tooltip
        $("#btnViewFullProfile").tooltip({
            title: 'Vizualizati intreg profilul'
        });

        // toggle icon from up to down
        // when details controls collapse
        $('a.accordion-toggle').click(function () {
            var iconElem = $(this).children('i'),
                currentClassAttr = iconElem.attr('class');

            if (currentClassAttr == 'icon-chevron-up') {
                iconElem.attr('class', 'icon-chevron-down');
            } else {
                iconElem.attr('class', 'icon-chevron-up');
            }
        });

        // iframe container width
        var parentContainer = $('#signDocsContent');
            treeContainer = $('#tree-container'),
            reportContainer = $('#documentListed'),
            docControlsContainer = $('#accordion-and-doc');
            docContainer = reportContainer.find('#documentListed')
                        .first();
       

        reportContainer.width(docControlsContainer.width());
       


        $(window).resize(function () {
            reportContainer.width(docControlsContainer.width());
        });

        $('#tree-toggle').click(function () {
            $("#filters").hide();
            var $this = $(this),
                parent = treeContainer,
                icon = $this.children('i');

            docContainer = reportContainer.find('.is-doc-container')
                            .first();

            parent.addClass('closing');

            if (parent.hasClass('closed')) { // if expand

                parent.removeClass('closed');
                parent.animate({
                    width: '29%'
                }, 300, function () {
                    parent.removeClass('closing');
                    icon.attr('class', 'icon-chevron-left');
                });
                docControlsContainer.animate({
                    width: '69%'
                }, 300, function () {
                    // make the report take the size of the doc controls
                    reportContainer.width(docControlsContainer.width());
                    

                    // call reflow on report if one exists
                    if (typeof $report !== 'undefined') {
                        $report.reflow();
                    }
                });

            } else {

                parent.animate({
                    width: '25px'
                }, 300, function () {
                    reportContainer.width(docControlsContainer.width());
                    

                    // call reflow on report if one exists
                    if (typeof $report !== 'undefined') {
                        $report.reflow();
                    }

                    parent.addClass('closed');
                    parent.removeClass('closing');
                    icon.attr('class', 'icon-chevron-right');
                });

                docControlsContainer.animate({
                    width: '95%'
                }, 300);
            }
        });

    });

</script>