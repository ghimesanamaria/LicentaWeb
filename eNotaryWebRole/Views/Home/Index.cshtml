<script type="text/javascript">

 </script>
@section AddToHead{
    <link href='@Url.Content("~/Content/home/index_home.css")' rel="stylesheet" />
    <link href='@Url.Content("~/Content/home/png_preview.css")' rel="stylesheet" />
    <link href='@Url.Content("~/Content/dropdown/simple.dropdown.css")' rel="stylesheet" />
}

<div class="home-container">
<div id="infoMessage " class="alert alert-info" style="float:left;">
    1. Cererile pentru intocmirea unui act notarial electronic pot fi inaintate notarului public, in forma electronica, in acest caz fiind semnate cu semnatura electronica extinsa a solicitantului. <br />
    2. In cazul in care cererea este facuta prin reprezentant, se va anexa actul in baza caruia partile sunt reprezentate, care poate fi si in forma electronica daca este semnat cu semnatura electronica extinsa a partilor.

</div>
<div id="errorMessage" style="float:left; margin-left:30px; margin-right: 60px;"></div>




<div class="progressBar">
<div class="status"></div>
</div>
    <div class="dropdown" >
        <label style="display:inline-block">Tipul actului/ actelor:</label>
    <div id="choose-act-type"></div>
        </div>
    <div id="container-files-and-details">
        <div id="areaContainerUpload" class="container">

            <div id="areaContainerUploadToggle" class="toggle-button">

                <i class="icon-chevron-up"></i>
            </div>
            <div id="messageContainerUpload">
                <span class="headerMessage">Incarcare fisiere
                </span>

            </div>

            <div id="areaToUpload">

                <div id="dragAndDropFiles" class="uploadArea hero-unit" style="margin-left: 30px;">
                    <p style="text-align: center;">Realizati drag and drop in aceasta zona pentru a incarca fisierele dorite</p>
                    <p style="text-align: center; color: grey;">(fisierele trebuie sa fie in format pdf si sa contina semnatura electronica extinsa) </p>
                </div>
                <form name="demoFiler" id="demoFiler" enctype="multipart/form-data" style="margin-left: 10px;">
                    <div class="fileinputs">
                    <input type="file" name="multiUpload" id="multiUpload" multiple="multiple" class="file" />
                    <div class="fakefile input-append">
                        <input value="Incarcati fisiere.." />
                        <button class="btn" style="margin-top:5px; padding-top:6px; "><i class="icon-search"></i></button>
                    </div>
                         <input type="submit" name="submitHandler" id="submitHandler" value="Upload" class="btn btn-info" />
                        </div>
                   
                </form>
            </div>
            <div class="clear-all"></div>

        </div>


        <div id="details-container" class="container" >
            <div id="details-Toggle" class="toggle-button">

                <i class="icon-chevron-down"></i>
            </div>

            <div id="message-details">
                <span class="headerMessage">Detalii fisier
                </span>

            </div>
            <div id="file-details"  style="display:none;">
                <label for="acttype">Tipul actului: <span class="required">*</span></label>
                @Html.DropDownList("ActType")
                <label for="name">Nume: <span class="required">*</span></label>
                <input type="text" id="hName" name="name" value="" placeholder="Nume.." required="required" autofocus="autofocus" />

                <label for="reason">Motiv: <span class="required">*</span></label>
                <input type="text" id="hReason" name="reason" value="" placeholder="Motiv..." required="required" />

                  <label for="message">Mentiuni: <span class="required">*</span></label>  
                <textarea id="hMessage" name="message" placeholder="Mentiuni..." required="required" data-minlength="20"></textarea> 
                <button id="saveFileDetails" class="btn btn-info">Salveaza datele</button>
            </div>

        </div>
    </div>
    <div id="information-preview-message" class="alert alert-error"> Fisiere incarcate trebuie sa fie editate. Dati click pe imagine si se va afisa un formular corespunzator! </div>
    <div id="area-container-preview" class="container">
    </div>

</div>





@section AddToBottom{
    <script src='@Url.Content("~/Scripts/home/home.js")'></script>
    <script src='@Url.Content("~/Scripts/home/preview_box.js")'></script>
    <script src='@Url.Content("~/Scripts/dropdown/simple.dropdown.js")'></script>
    <script>

        $(function () {
            addEvents();



            $('#choose-act-type').simpleDropdown({
                selectedID: '@ViewBag.parentID',
                defaultText: 'Select act type',
                inputName: 'PActType',
                url: '@Url.Action("GetActType", "Home")',
            });

        });

        var myFunction = function (element) {
            var relDiv = element.id.split(':')[0];
            if (confirm("Sunteti sigur ca doriti  sa stergeti acest fisier")) {
                $(".dfiles[rel='" + relDiv + "']").remove();
            }
        }

        var config = {
            // Valid file formats
            //support: "image/jpg,image/png,image/bmp,image/jpeg,image/gif",
            support: "application/pdf",
            form: "demoFiler", // Form ID
            dragArea: "dragAndDropFiles", // Upload Area ID
            uploadUrl: '@Url.Content("~/Home/Upload")' // Server side file url
    };
    //Initiate file uploader.
    $(document).ready(function () {
        initMultiUploader(config);
       
    });
    var image_clicked = 0;
    $("#saveFileDetails").click(function (event) {
        event.preventDefault();
       var param = new Object();
       param.ID = $("div.div-preview").find("img.clicked")[0].id;
       param.Name = $("#hName").val();
       param.ActTypeID = $("#ActType").find(":selected").val();
       param.ExtraDetails = $("#hMessage").val();
       param.Reason = $("#hReason").val();
      
        var parameter = JSON.stringify(param);
        $.ajax({
            type: "POST",
            url: '@Url.Content("~/Home/SaveDataFile/")',
            dataType: 'json',
            data: parameter,
            contentType: "application/json",
            success: function (data) {
                console.log(data);
            },

            error: function () {
                console.log('eroare');

            }
        });
       
    });
        //script for upload style

    
      


    </script>
}



